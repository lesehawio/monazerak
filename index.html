<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Ø¨Ø§Ø²ÛŒ Ù…Ù†Ø§Ø¸Ø±Ú©</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f5f5f5;
      text-align: center;
      direction: rtl;
    }
    .player {
      border: 2px solid #333;
      border-radius: 12px;
      padding: 10px;
      margin: 10px;
      display: inline-block;
      background-color: #ffffff;
      width: 220px;
      position: relative;
    }
    .player.pastel-1 { background-color: #ffe6e6; }
    .player.pastel-2 { background-color: #e6ffe6; }
    .player.pastel-3 { background-color: #e6e6ff; }
    .player.pastel-4 { background-color: #fff0e6; }
    .player.pastel-5 { background-color: #f0e6ff; }
    .player.pastel-6 { background-color: #e6ffff; }
    .turn { border: 3px solid #007bff; }
    .log {
      background-color: #eaeaea;
      max-height: 200px;
      overflow-y: auto;
      padding: 10px;
      margin: 20px auto;
      width: 90%;
      text-align: right;
    }
    .buttons button {
      margin: 4px;
      padding: 6px 12px;
      border-radius: 6px;
    }
    #scoreBoard {
      margin-top: 20px;
      font-weight: bold;
    }
    #topicBox, #logicBox {
      background-color: #fff3cd;
      padding: 10px;
      margin: 15px auto;
      width: 80%;
      border-radius: 8px;
      border: 1px solid #ffeeba;
      font-size: 18px;
    }
    .logic-options button {
      margin: 4px;
      padding: 6px 12px;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <h1>ğŸ´ Ø¨Ø§Ø²ÛŒ Ù…Ù†Ø§Ø¸Ø±Ú©</h1>

  <div id="setup">
    <h2>Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù†</h2>
    <input type="text" id="newPlayer" placeholder="Ù†Ø§Ù… Ø¨Ø§Ø²ÛŒÚ©Ù†">
    <button onclick="addPlayer()">â• Ø§ÙØ²ÙˆØ¯Ù†</button>
    <button onclick="startGame()">ğŸ® Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>
    <div id="playerList"></div>
  </div>

  <div id="game" style="display: none;">
    <div id="topicBox">ğŸ” Ù…ÙˆØ¶ÙˆØ¹ Ù…Ù†Ø§Ø¸Ø±Ù‡: <span id="topicText">â€”</span></div>
    <div id="logicBox">
      ğŸ§  Ù…Ù†Ø·Ù‚ Ù…Ù†Ø§Ø¸Ø±Ù‡: <span id="currentLogic">Ø§Ø³ØªØ¯Ù„Ø§Ù„ Ù…Ù†Ø·Ù‚ÛŒ Ùˆ Ø¹Ù„Ù…ÛŒ (â™¦)</span>
      <div class="logic-options">
        <button onclick="setLogic('â™¦', 'Ù…Ù†Ø·Ù‚ÛŒ Ùˆ Ø¹Ù„Ù…ÛŒ')">â™¦ Ù…Ù†Ø·Ù‚ÛŒ Ùˆ Ø¹Ù„Ù…ÛŒ</button>
        <button onclick="setLogic('â™ ', 'Ø³ÛŒØ§Ø³ÛŒ Ùˆ Ù‚Ø¯Ø±ØªÛŒ')">â™  Ø³ÛŒØ§Ø³ÛŒ Ùˆ Ù‚Ø¯Ø±ØªÛŒ</button>
        <button onclick="setLogic('â™¥', 'Ø§Ø­Ø³Ø§Ø³ÛŒ')">â™¥ Ø§Ø­Ø³Ø§Ø³ÛŒ</button>
        <button onclick="setLogic('â™£', 'ÙÙ„Ø³ÙÛŒ Ùˆ Ø§Ø®Ù„Ø§Ù‚ÛŒ')">â™£ ÙÙ„Ø³ÙÛŒ Ùˆ Ø§Ø®Ù„Ø§Ù‚ÛŒ</button>
      </div>
    </div>
    <h2>Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù†</h2>
    <div id="players"></div>
    <h3>Ù†ÙˆØ¨Øª: <span id="currentPlayerName"></span></h3>
    <div id="timer">Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: <span id="timeLeft">Û°</span> Ø«Ø§Ù†ÛŒÙ‡</div>
    <div class="log" id="log"></div>
    <div id="scoreBoard">ğŸ¯ Ø§Ù…ØªÛŒØ§Ø²Ù‡Ø§: <span id="scores"></span></div>
  </div>

  <script>
    let players = [];
    let currentPlayerIndex = 0;
    let turnTimer;
    let timeLeft = 0; // Ø²Ù…Ø§Ù† Ø§ÙˆÙ„ÛŒÙ‡ ØµÙØ±
    let colors = ['pastel-1','pastel-2','pastel-3','pastel-4','pastel-5','pastel-6'];
    const topics = [
      'Ø¢ÛŒØ§ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ ØªÙ‡Ø¯ÛŒØ¯ Ø§Ø³Øª ÛŒØ§ ÙØ±ØµØªØŸ',
      'Ø¢ÛŒØ§ Ù…Ù‡Ø§Ø¬Ø±Øª Ø¨Ù‡ Ù†ÙØ¹ Ú©Ø´ÙˆØ± Ù…Ø¨Ø¯Ø§ Ø§Ø³Øª ÛŒØ§ Ø¨Ù‡ Ø¶Ø±Ø± Ø¢Ù†ØŸ',
      'Ø¢ÛŒØ§ ÙØ¶Ø§ÛŒ Ù…Ø¬Ø§Ø²ÛŒ Ø¢Ø²Ø§Ø¯ÛŒ Ø¨ÛŒØ§Ù† Ø±Ø§ ØªÙ‚ÙˆÛŒØª Ú©Ø±Ø¯Ù‡ ÛŒØ§ ØªØ¶Ø¹ÛŒÙØŸ',
      'Ø¢ÛŒØ§ Ø¹Ø¯Ø§Ù„Øª Ù…Ù‡Ù…â€ŒØªØ± Ø§Ø³Øª ÛŒØ§ Ø¢Ø²Ø§Ø¯ÛŒØŸ',
      'Ø¢ÛŒØ§ Ø¢Ù…ÙˆØ²Ø´ Ø­Ø¶ÙˆØ±ÛŒ Ø¨Ù‡ØªØ± Ø§Ø³Øª ÛŒØ§ Ù…Ø¬Ø§Ø²ÛŒØŸ',
      // ... (Ø¨Ù‚ÛŒÙ‡ Ù…ÙˆØ¶ÙˆØ¹Ø§Øª)
    ];
    let currentLogic = { symbol: 'â™¦', label: 'Ù…Ù†Ø·Ù‚ÛŒ Ùˆ Ø¹Ù„Ù…ÛŒ' };

    function setLogic(symbol, label) {
      currentLogic = { symbol, label };
      document.getElementById('currentLogic').textContent = `${label} (${symbol})`;
      logAction(`â™Ÿ Ù…Ù†Ø·Ù‚ Ù…Ù†Ø§Ø¸Ø±Ù‡ Ø¨Ù‡ ${label} (${symbol}) ØªØºÛŒÛŒØ± ÛŒØ§ÙØª.`);
    }

    function addPlayer() {
      const name = document.getElementById('newPlayer').value.trim();
      if (name) {
        players.push({ name, score: 0, time: 0 }); // Ø²Ù…Ø§Ù† Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¨Ø§Ø²ÛŒÚ©Ù†
        document.getElementById('newPlayer').value = '';
        renderPlayerList();
      }
    }

    function renderPlayerList() {
      document.getElementById('playerList').innerHTML = players.map(p => `<p>${p.name}</p>`).join('');
    }

    function startGame() {
      if (players.length < 2) return alert('Ø­Ø¯Ø§Ù‚Ù„ Ø¯Ùˆ Ø¨Ø§Ø²ÛŒÚ©Ù† Ù†ÛŒØ§Ø² Ø§Ø³Øª.');
      const randomTopic = topics[Math.floor(Math.random() * topics.length)];
      document.getElementById('topicText').textContent = randomTopic;
      document.getElementById('setup').style.display = 'none';
      document.getElementById('game').style.display = 'block';
      renderPlayers();
      startTurn();
    }

    function renderPlayers() {
      const container = document.getElementById('players');
      container.innerHTML = '';
      players.forEach((p, i) => {
        const div = document.createElement('div');
        div.className = `player ${colors[i % colors.length]} ${i === currentPlayerIndex ? 'turn' : ''}`;
        div.innerHTML = `
          <strong>${p.name}</strong><br>
          ğŸ¯ Ø§Ù…ØªÛŒØ§Ø²: ${p.score}<br>
          <div class="buttons">
            <label for="timeInput${i}">Ø²Ù…Ø§Ù† (1 ØªØ§ 10):</label>
            <input type="number" id="timeInput${i}" min="1" max="10" value="2" onchange="setTime(${i})">
            <button onclick="startTurnForPlayer(${i})">ğŸš€ Ø´Ø±ÙˆØ¹</button>
            <button onclick="stopTimer()">â¸ï¸ ØªÙˆÙ‚Ù Ø²Ù…Ø§Ù†</button>
            <button onclick="addTime(${i})">â± Ø²Ù…Ø§Ù† Ø¨ÛŒØ´ØªØ±</button>
            <button onclick="askDivergent(${i})">â“ Ø³ÙˆØ§Ù„ Ø§Ù†Ø­Ø±Ø§ÙÛŒ</button>
            <button onclick="changeLogic()">ğŸ‘‘ ØªØ¹ÙˆÛŒØ¶ Ù…Ù†Ø·Ù‚ (Ø´Ø§Ù‡)</button>
            <button onclick="vote(${i})">ğŸ—³ Ø±Ø£ÛŒ</button>
            <button onclick="addScore(${i})">â• Ø§Ù…ØªÛŒØ§Ø²</button>
          </div>
        `;
        container.appendChild(div);
      });
    }

    function setTime(i) {
      const inputValue = parseInt(document.getElementById(`timeInput${i}`).value);
      if (inputValue >= 1 && inputValue <= 10) {
        players[i].time = inputValue; // Ø²Ù…Ø§Ù† Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆØ±ÙˆØ¯ÛŒ Ø¨Ø§Ø²ÛŒÚ©Ù†
      }
    }

    function startTurnForPlayer(i) {
      currentPlayerIndex = i;
      timeLeft = players[currentPlayerIndex].time * 10; // Ø²Ù…Ø§Ù† Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆØ±ÙˆØ¯ÛŒ Ø¨Ø§Ø²ÛŒÚ©Ù†
      updateTurnDisplay();
      document.getElementById('timeLeft').textContent = timeLeft;
      clearInterval(turnTimer);
      turnTimer = setInterval(() => {
        timeLeft--;
        document.getElementById('timeLeft').textContent = timeLeft;
        if (timeLeft <= 0) {
          clearInterval(turnTimer);
          logAction(`${players[currentPlayerIndex].name} Ù†ÙˆØ¨ØªØ´ ØªÙ…ÙˆÙ… Ø´Ø¯. Ø§Ø³ØªØ±Ø§Ø­Øª!`);
          currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
          startTurnForPlayer(currentPlayerIndex); // Ø´Ø±ÙˆØ¹ Ù†ÙˆØ¨Øª Ø¨Ø¹Ø¯ÛŒ
        }
      }, 1000); // Ú©Ø§Ù‡Ø´ Ø²Ù…Ø§Ù† Ù‡Ø± Ø«Ø§Ù†ÛŒÙ‡
    }

    function stopTimer() {
      clearInterval(turnTimer);
      logAction(`${players[currentPlayerIndex].name} Ø²Ù…Ø§Ù† Ø±Ø§ Ù…ØªÙˆÙ‚Ù Ú©Ø±Ø¯.`);
    }

    function updateTurnDisplay() {
      document.getElementById('currentPlayerName').textContent = players[currentPlayerIndex].name;
    }

    function logAction(msg) {
      const log = document.getElementById('log');
      const p = document.createElement('p');
      p.textContent = msg;
      log.prepend(p);
    }

    function askDivergent(i) {
      logAction(`ğŸ‘¸ ${players[i].name} Ø§Ø² Ø³ÙˆØ§Ù„ Ø§Ù†Ø­Ø±Ø§ÙÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯.`);
    }

    function addTime(i) {
      players[i].time += 30; // Ø²Ù…Ø§Ù† Ø¨ÛŒØ´ØªØ±ÛŒ Ø¨Ù‡ Ø¨Ø§Ø²ÛŒÚ©Ù† Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
      logAction(`ğŸª– ${players[i].name} Ø²Ù…Ø§Ù† ØµØ­Ø¨Øª Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ø§Ø¯.`);
    }

    function vote(i) {
      players[i].score++;
      logAction(`${players[i].name} ÛŒÚ© Ø±Ø£ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯.`);
      renderPlayers();
      updateScores();
    }

    function addScore(i) {
      const pts = parseInt(prompt('Ø§Ù…ØªÛŒØ§Ø²ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯:'));
      if (!isNaN(pts)) {
        players[i].score += pts;
        renderPlayers();
        updateScores();
      }
    }

    function changeLogic() {
      const suit = prompt('Ù…Ù†Ø·Ù‚ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯: â™  (Ø³ÛŒØ§Ø³ÛŒ)ØŒ â™¥ (Ø§Ø­Ø³Ø§Ø³ÛŒ)ØŒ â™£ (ÙÙ„Ø³ÙÛŒ)ØŒ â™¦ (Ø¹Ù„Ù…ÛŒ)');
      const logicMap = {
        'â™ ': 'Ø³ÛŒØ§Ø³ÛŒ Ùˆ Ù‚Ø¯Ø±ØªÛŒ',
        'â™¥': 'Ø§Ø­Ø³Ø§Ø³ÛŒ',
        'â™£': 'ÙÙ„Ø³ÙÛŒ Ùˆ Ø§Ø®Ù„Ø§Ù‚ÛŒ',
        'â™¦': 'Ù…Ù†Ø·Ù‚ÛŒ Ùˆ Ø¹Ù„Ù…ÛŒ'
      };
      if (logicMap[suit]) setLogic(suit, logicMap[suit]);
    }

    function updateScores() {
      const scoreText = players.map(p => `${p.name}: ${p.score}`).join(' | ');
      document.getElementById('scores').textContent = scoreText;
    }
  </script>

</body>
</html>
